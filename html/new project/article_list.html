<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="MobileOptimized" content="width">
    <meta name="HandheldFriendly" content="true">
    <meta name="format-detection" content="telephone=no">
    <meta name="360-site-verification" content="604a14b53c6b871206001285921e81d8">
    <meta name="format-detection" content="email=no"/>
    <meta name="keywords" content="视频">
    <meta name="description" content="视频">
    <title>视频</title>
    <script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="assets/bootstrap.min/bootstrap.min.js"></script>
    <script src="assets/js/vue.min.js"></script>
    <script src="assets/js/common.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/bootstrap.min/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/main-style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/index.css">
</head>
<body>
<div id="index">
    <div class="header">
        <div class="update-box bg-gray up-box" style="display: none">
            <div class="content">
                <i class="icon jiazai-icon pull-left"></i>
                <label class="pull-left">松开刷新...</label>
            </div>
        </div>
        <div class="nav row">
            <div class="nav-logo col-xs-2 col-md-2 ">
                <div class="logo"></div>
            </div>
            <div class="search-input col-xs-10 col-md-10">
                <div class="row">
                    <div class="search col-xs-11 col-md-11">
                        <i class="icon search-icon"></i>
                        <input id="nav-search" type="text" class="nav-search">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tj-tab">
        <div class="video-tab-box">
            <div class="video-tab">
                <div class="control-tab v-tab pull-left active"><a class="block">推荐</a></div>
                <div class="control-tab v-tab pull-left"><a class="block">地区</a></div>
                <div class="control-tab v-tab pull-left"><a class="block">搞笑</a></div>
                <div class="control-tab v-tab pull-left"><a class="block">娱乐</a></div>
                <div class="control-tab v-tab pull-left"><a class="block">娱乐</a></div>
                <div class="control-tab v-tab pull-left"><a class="block">娱乐</a></div>
                <div class="control-tab v-tab pull-left"><a class="block">娱乐</a></div>
            </div>
        </div>
        <div class="white-shadow"></div>
    </div>
    <script src="assets/js/fixed_top.js"></script>
    <div class="container">
        <div class="index-container">
            <!--列表-->
            <div class="index-data">
                <div class="data-list" v-for="(list,index) in lists" :data-id="list.id">
                    <div class="title">
                        <div class="pic pull-left">
                            <a :href="list.home_url"><img class="head-img" :src="list.logo"></a>
                        </div>
                        <div class="poster pull-left">
                            <p class="poster-name"><a :href="list.home_url">{{list.nichen}}</a></p>
                            <p class="posting-time">{{list.addtime}}</p>
                        </div>
                        <div class="right-btn pull-right">
                            <button class="index-gz-btn" :data-userid="list.uid" @click="guanzhu(list,list.uid)" v-bind:class="{active : list.utype}">关注</button>
                        </div>
                    </div>
                    <!--文章一-->
                    <div v-if="list.pic.length == 3 || list.pic.length == 0" class="content row">
                        <div class="words">
                            <div class="word-title"><a :href="list.url">{{list.name}}</a></div>
                            <div class="word-contet">{{list.content}}</div>
                            <div class="pic-box row">
                                <div v-for="value in list.pic" class="article-pic pull-left">
                                    <img class="pic pull-left" :src="value">
                                </div>
                            </div>
                        </div>
                        <div class="bottom-icon-group">
                            <div class="group-li pull-left"><i class="icon dz-icon" v-bind:class="{active:list.dztype}" @click="dianzan(list,list.uid)"></i>{{list.dhits}}</div>
                            <div class="group-li pull-left"><i class="icon ds-icon to-ds"></i>{{list.shang_cion}}</div>
                            <div class="group-li pull-left"><i class="icon hb-icon"></i>{{list.hb}}</div>
                            <div class="group-li last pull-right"><i class="icon ck-icon pull-left"></i><label class="pull-left">{{list.hits}}</label>
                                <i :data-id="list.id" @click="clear(list)" class="icon index-close-icon pull-left"></i></div>
                        </div>
                    </div>
                    <!--文章二-->
                    <div  v-if="list.pic.length != 3 && list.pic.length != 0" class="content row">
                        <div class="left-content pull-left col-xs-8 col-md-8">
                            <div class="words"><a :href="list.url">{{list.name}}</a></div>
                            <div class="bottom-icon-group">
                                <div class="group-li pull-left"><i class="icon dz-icon" v-bind:class="{active:list.dztype}" @click="dianzan(list,list.uid)"></i>{{list.dhits}}</div>
                                <div class="group-li pull-left"><i class="icon ds-icon to-ds"></i>{{list.shang_cion}}</div>
                                <div class="group-li pull-left"><i class="icon hb-icon"></i>{{list.hb}}</div>
                                <div class="group-li last pull-right"><i :data-id="list.id" @click="clear(list)" class="icon index-close-icon pull-left"></i></div>
                            </div>
                        </div>
                        <div class="video-box pull-right col-xs-4 col-md-4">
                            <img v-for="(value,index) in list.pic" v-if="index==0" class="v-pic" :src="value" alt="插图">
                            <div class="num"><div class="pull-right"><i class="icon ck-white-icon pull-left"></i><span>{{list.hits}}</span></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="update-box bg-gray">
            <div class="content">
                <i class="icon jiazai-icon pull-left"></i>
                <label class="pull-left">正在刷新...</label>
            </div>
        </div>
    </div>
    <div class="bottom-wrapper">
        <div class="bottom row">
            <div class="tab col-xs-3 col-md-3">
                <a class="block" href="index.html">
                    <i class="block-icon tj-icon"></i>
                    <p>推荐</p>
                </a>
            </div>
            <div class="tab col-xs-3 col-md-3">
                <a class="block" href="video-list.html">
                    <i class="block-icon sp-icon"></i>
                    <p>视频</p>
                </a>
            </div>
            <div class="tab col-xs-3 col-md-3 active">
                <a class="block" href="article_list.html">
                    <i class="block-icon wz-icon active"></i>
                    <p>文章</p>
                </a>
            </div>
            <div class="tab col-xs-3 col-md-3 ">
                <a class="block" href="me.html">
                    <i class="block-icon wd-icon"></i>
                    <p>我的</p>
                </a>
            </div>
        </div>
    </div>
    <!--遮罩层-->
    <div class="mask show-num"></div>
</div>

<script type="text/javascript">
    var index = new Vue({

        el: "#index",
        data:{
            activeClass:"active",
            bodyHeight:0,
            inputKeywords:"",
            clickKeywords:0,
            searchType:2,
            lists:[],
            items:[],
            // url:CN_API['index_class_lists'],
            url:"",
            flag:0
        },
        watch:{
            inputKeywords:function () {
                this.getSearchID(-1);
            },
        },
        mounted:function(){

            window.addEventListener('scroll', this.handleScroll);

            var _self = this;

            var classData = [
                {
                    id:0,
                    name:"推荐"

                },
                {
                    id:-1,
                    name:"地区"

                }];
            // 获取分类列表并设置外框宽度
            // ajaxPost(CN_API['index_class'],{table:"vod"},function(data){
            //     if(data.code==0){
            //         this.items = data.msg;
            //          var itemBoxWidth = this.items.length/5;
            //          if(itemBoxWidth<1){
            //          $("#itemsBox").css("width", "100%");
            //           }else{
            //          var boxWidth = (itemBoxWidth+1)*100%
            //          $("#itemsBox").css("width", boxWidth);
            // }

            //     }
            _self.items = classData;
            var itemBoxWidth = classData.length/5;
            if(itemBoxWidth<1){
                $("#itemsBox").css("width", "100%");
            }else{
                var boxWidth = (itemBoxWidth+1)*100%
                    $("#itemsBox").css("width", boxWidth);
            }

            this.getSearchID(0);
        },
        methods:{
            getSearchID:function(classID){
                var dataJ = [
                    {
                        id:3,
                        type:'2',
                        uid:"1",
                        utype:true,
                        nichen:"离离原上草",
                        home_url:"my_page.html",
                        logo:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                        name:"欧洲是沉睡的美人。",
                        url:"www.baidu.com",
                        addtime:"2018-03-01 10:11:10",
                        dhits:"128",
                        shang_cion:"123",
                        hb:"123",
                        hits:"123万",
                        pic:["https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                            "https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg"],
                        sc:"23:24",
                        content:" 一月初离开欧洲前，我当了一回伯尔尼纳快车的乘客。伯尔尼纳快车并不快，这趟南北走向的高山窄轨火...",
                        dztype:false
                    },
                    {
                        id:4,
                        type:'2',
                        uid:"1",
                        utype:true,
                        nichen:"离离原上草",
                        home_url:"my_page.html",
                        logo:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                        name:"欧洲是沉睡的美人。",
                        url:"www.baidu.com",
                        addtime:"2018-03-01 10:11:10",
                        dhits:"128",
                        shang_cion:"123",
                        hb:"123",
                        hits:"123万",
                        pic:["https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg"],
                        sc:"23:24",
                        content:" 一月初离开欧洲前，我当了一回伯尔尼纳快车的乘客。伯尔尼纳快车并不快，这趟南北走向的高山窄轨火...",
                        dztype:false
                    },
                    {
                        id:5,
                        type:'2',
                        uid:"1",
                        utype:true,
                        nichen:"离离原上草",
                        home_url:"my_page.html",
                        logo:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                        name:"欧洲是沉睡的美人。",
                        url:"www.baidu.com",
                        addtime:"2018-03-01 10:11:10",
                        dhits:"128",
                        shang_cion:"123",
                        hb:"123",
                        hits:"123万",
                        pic:[],
                        sc:"23:24",
                        content:" 一月初离开欧洲前，我当了一回伯尔尼纳快车的乘客。伯尔尼纳快车并不快，这趟南北走向的高山窄轨火...",
                        dztype:false
                    },
                    {
                        id:6,
                        type:'2',
                        uid:"1",
                        utype:true,
                        nichen:"离离原上草",
                        home_url:"my_page.html",
                        logo:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                        name:"欧洲是沉睡的美人。",
                        url:"www.baidu.com",
                        addtime:"2018-03-01 10:11:10",
                        dhits:"128",
                        shang_cion:"123",
                        hb:"123",
                        hits:"123万",
                        pic:["https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                            "https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                            "https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg"],
                        sc:"23:24",
                        content:" 一月初离开欧洲前，我当了一回伯尔尼纳快车的乘客。伯尔尼纳快车并不快，这趟南北走向的高山窄轨火...",
                        dztype:false
                    },
                    {
                        id:7,
                        type:'2',
                        uid:"1",
                        utype:true,
                        nichen:"离离原上草",
                        home_url:"my_page.html",
                        logo:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg",
                        name:"欧洲是沉睡的美人。",
                        url:"www.baidu.com",
                        addtime:"2018-03-01 10:11:10",
                        dhits:"128",
                        shang_cion:"123",
                        hb:"123",
                        hits:"123万",
                        pic:["https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=212297457,1410173076&fm=200&gp=0.jpg"],
                        sc:"23:24",
                        content:" 一月初离开欧洲前，我当了一回伯尔尼纳快车的乘客。伯尔尼纳快车并不快，这趟南北走向的高山窄轨火...",
                        dztype:false
                    },
                ];

                var length = dataJ.length;
                for(var i=0;i<length;i++){
                    this.lists.push(dataJ[i]);
                }

                if(classID != -1){
                    // ajaxPost(this.url,{table:"news",cid:classID},function(data){
                    //     if(data.code==0){
                    //         this.lists = data.msg;
                    //     }
                    // })
                }else{
                    // ajaxPost(this.url,{table:"news",key:this.inputKeywords},function(data){
                    //     if(data.code==0){
                    //         this.lists = data.msg;
                    //     }
                    // })
                }

            },
            dianzan:function (list,idVal) {
                list.dztype = !list.dztype;
            },
            guanzhu:function (list,userid) {
                list.utype = !list.utype;
            },
            clear:function (index) {
                var list = this.lists;
                list.splice(jQuery.inArray(index,list),1);
            },
            handleScroll:function () {
                this.bodyHeight = $(document).height();
                if( ($(window).scrollTop()+$(window).height()) > this.bodyHeight-20 && this.flag == 0){
                    this.flag = 1;
                    console.log("上拉加载");
                    // ajaxPost(this.url,this.dataJson,function(data){
                    //     if(data.code==0){
                    //         var dataJ = data.msg;
                    //         this.flag = 0;
                    //         var length = dataJ.length;
                    //         for(var i=0;i<length;i++){
                    //             this.lists.push(dataJ[i]);
                    //         }
                    //     }
                    // })
                }
            }
        }

    })
</script>
</body>
</html>